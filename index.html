<!DOCTYPE html>
<html lang="en"> 
<head>
    <title>Sâmela Bruna - PDI</title>
    
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Blog Template">
    <meta name="author" content="Xiaoying Riley at 3rd Wave Media">    
    <link rel="shortcut icon" href="favicon.ico"> 
    
    <!-- FontAwesome JS-->
    <script defer src="https://use.fontawesome.com/releases/v5.7.1/js/all.js" integrity="sha384-eVEQC9zshBn0rFj4+TU78eNA19HMNigMviK/PU/FFjLXqa/GKPgX58rvt5Z8PLs7" crossorigin="anonymous"></script>
    
    <!-- Plugin CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/styles/monokai-sublime.min.css">
    
    <!-- Theme CSS -->  
    <link id="theme-style" rel="stylesheet" href="assets/css/theme-8.css">
	<link id="theme-style-main" rel="stylesheet" href="assets/css/main.css">
    

</head> 

<body>
    
    <header class="header text-center">	    
	    <h1 class="blog-name pt-lg-4 mb-0"><a href="index.html">Sâmela Bruna Ferreira</a></h1>
        
	    <nav class="navbar navbar-expand-lg navbar-dark" >
           
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation" aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
			</button>

			<div id="navigation" class="collapse navbar-collapse flex-column" >
				<div class="profile-section pt-3 pt-lg-0">
				    <img class="profile-image mb-3 rounded-circle mx-auto" src="assets/images/teste2.png" alt="image" >			
					
					<div class="bio mb-3">Olá, meu nome é Sâmela sou estudante de Engenharia Mecatrônica da UFRN e está página é dedicada à disciplina de Processamento Digital de Imagens.
						Códigos disponíveis no GitHub abaixo:<br></div><!--//bio-->
					<ul class="social-list list-inline py-3 mx-auto">
			            <!--<li class="list-inline-item"><a href="#"><i class="fab fa-twitter fa-fw"></i></a></li> -->
			            <li class="list-inline-item"><a href="https://www.linkedin.com/in/samela-bruna-ferreira" target="_blank"><i class="fab fa-linkedin-in fa-fw"></i></a></li>
			            <li class="list-inline-item"><a href="https://github.com/SamelaBruna?tab=repositories"><i class="fab fa-github-alt fa-fw"></i></a></li>
			            <!--<li class="list-inline-item"><a href="#"><i class="fab fa-stack-overflow fa-fw"></i></a></li> -->
			            <!--<li class="list-inline-item"><a href="#"><i class="fab fa-codepen fa-fw"></i></a></li> -->
			        </ul><!--//social-list-->
			        <hr> 
				</div><!--//profile-section-->

				<ol class="navbar-nav flex-column text-left">
					<li class="nav-item active"><a class="nav-link" href="#t1">Manipulando Pixels  </a></li>
					<li class="nav-item active"><a class="nav-link" href="#t2">Preenchendo Regiões  </a></li>
					<li class="nav-item active"><a class="nav-link" href="#t3">Manipulação de histogramas  </a></li>
					<li class="nav-item active"><a class="nav-link" href="#t4">Filtragem domínio espacial I </a></li>
					<!--<li class="nav-item active"><a class="nav-link" href="#t2">t5  </a></li>
					<li class="nav-item active"><a class="nav-link" href="#t2">t6  </a></li>
					<li class="nav-item active"><a class="nav-link" href="#t2">t7  </a></li>
					<li class="nav-item active"><a class="nav-link" href="#t2">t8  </a></li>-->

					
				</ul>
				<!--<ul class="navbar-nav flex-column text-left">
					<li class="nav-item active">
					    <a class="nav-link" href="index.html"><i class="fas fa-home fa-fw mr-2"></i>Blog Home <span class="sr-only">(current)</span></a> 
					</li>
					<li class="nav-item">
					    <a class="nav-link" href="blog-post.html"><i class="fas fa-bookmark fa-fw mr-2"></i>Blog Post</a>
					</li>
					<li class="nav-item">
					    <a class="nav-link" href="about.html"><i class="fas fa-user fa-fw mr-2"></i>About Me</a>
					</li>
				</ul> -->
				
				<!--<div class="my-2 my-md-3">
				    <a class="btn btn-primary" href="https://themes.3rdwavemedia.com/" target="_blank">Get in Touch</a>
				</div>-->
			</div>
		</nav>
    </header>
    
    <div class="main-wrapper">
    	 <section class="cta-section theme-bg-light py-5">
		    <div class="container text-center">
			    <h2 class="heading">DCA0445 - Processamento Digital de Imagens</h2>
			</div>
		</section>
	    
	    <article class="blog-post px-3 py-5 p-md-5">
		    <div class="container">
			    <header class="blog-post-header">
				    <h2 id="t1" class="title mb-2">Manipulando Pixels em uma imagem</h2>
				    
				    <div class="meta mb-3"></div>
			    </header>
			    
			    <!--<div class="blog-post-body">
				    <figure class="blog-banner">
				        <a href="https://made4dev.com"><img class="img-fluid" src="assets/images/blog/blog-post-banner.jpg" alt="image"></a>
				        <figcaption class="mt-2 text-center image-caption">Image Credit: <a href="https://made4dev.com?ref=devblog" target="_blank">made4dev.com (Premium Programming T-shirts)</a></figcaption>
				    </figure>-->
				    <h4>Exercicio 1 </h4>
				    <p style="color:#6C51A4;"><i>Utilizando o programa exemplos/pixels.cpp como referência, implemente um programa regions.cpp. Esse programa deverá solicitar ao usuário as coordenadas de dois pontos P1 e P2 localizados dentro dos limites do tamanho da imagem e exibir que lhe for fornecida. Entretanto, a região definida pelo retângulo de vértices opostos definidos pelos pontos P1 e P2 será exibida com o negativo da imagem na região correspondente.</i> </p>

				    <p>Para a resolução desse exercicio é necessário percorrer a imagem como um todo em seu tamanho e largura de modo que ao encontrar um pixel seja subtraído 255 do seu valor, sendo assim é possível fazer o negativo da imagem. Dessa maneira A função denominada spaceNegative percorre a imagem da mesma forma que se percorre uma matriz a partir do pontos requeridos P1 e P2 através de um for() e quando encontrado um pixel de 255 nessa região a operação de subtração é realizada. É importante lembrar que no sistema referencial do OpenCV o eixo x se encontra na vertical e o eixo y na horizontal.</p> 

				    
				    <p><b>Obs:</b> Para este exercicio foi considerado que a região escolhida será sempre do menor para o maior, ou seja, caso o usuário digite que P1(20,30) P2(25,15) o retângulo criado será do 20 ao 25 no eixo x e do 15 ao 30 do eixo y.</p>
				    

				    <pre>
					    <code>
#importando as bibliotecas necessárias					    	
import cv2 as cv
import numpy as np

img = cv.imread("../Fotos/biel.png")
#utilizando o metódo shape que retorna o tamanho de um array
sizeImg = np.shape(img)
print(sizeImg)

#Para negativar uma imagem é necessário subtrair 255 do seu valor no pixel
def spaceNegative(P1,P2,img):
	#For que irá x do P1 até o x do P2
    for i in range(P1[0], P2[0]):
    	#For que irá y do P1 até o y do P2
        for j in range(P1[1], P2[1]):
            img[i][j] = 255 - img[i][j]
    return img

#Recebendo os Pontos
print("Digite os pontos de P1(x1,y1) e P2(x2,y2):")
p1 = []
p2 = []
x1 = int(input("x1: "))
y1 = int(input("y1: "))
p1.append(x1)
p1.append(y1)

#Verificando se os pontos P1 atendem ao tamanho da imagem
while (p1[0] > sizeImg[0] or p1[0] < 0 or p1[1] > sizeImg[1] or p1[1] < 0):
    print("conjunto de pontos inválido, digite novamente")
    x1 = int(input("x1: "))
    y1 = int(input("y1: "))
    p1[0] = x1
    p1[1] = y1

x2 = int(input("x2: "))
y2 = int(input("y2: "))
p2.append(x2)
p2.append(y2)

#Verificando se os pontos P2 atendem ao tamanho da imagem
while (p2[0] > sizeImg[0] or p2[0] < 0 or p2[1] > sizeImg[1] or p2[1] < 0):
    print("conjunto de pontos inválido, digite novamente")
    x2 = int(input("x1: "))
    y2 = int(input("y1: "))
    p2[0] = x2
    p2[1] = y2

#Fazendo a troca dos pontos caso o P2(x,y) possua algum ponto menor que P1(x,y)
if (p1[0] > p2[0]):
    varAux = p1[0]
    p1[0] = p2[0]
    p2[0] = varAux

if (p1[1] > p2[1]):
    varAuxy = p1[1]
    p1[1] = p2[1]
    p2[1] = varAuxy

print(p1,p2)
img2 = spaceNegative(p1,p2,img)
#mostrar a imagem após o filtro
cv.imshow("bielinvertido",img2)
#salvar a imagem
cv.imwrite("../Fotos/bielinvertido.jpg", img2)

cv.waitKey(0)
cv.destroyAllWindows()
					    </code>
					</pre>

					 <h5>Resultado:</h5>
						 <div class="ladoalado"><img src="assets/images/regioes2.png"><img src="assets/images/bielinvertido.jpg"></div> 

				    <div class="meta mb-3"></div>
					<h4>Exercicio 2</h4>
					<p style="color:#6C51A4;"><i>Utilizando o programa exemplos/pixels.cpp como referência, implemente um programa trocaregioes.cpp. Seu programa deverá trocar os quadrantes em diagonal na imagem. Explore o uso da classe Mat e seus construtores para criar as regiões que serão trocadas. O efeito é ilustrado na Figura 5.</i> </p>


					<p>Uma das formas de resolver esse problema é particionando a imagem original em 4 novas imagens e criando uma nova imagem de mesmo tamanho e largura da original e posicionando as 4 imagens criadas em uma nova imagem que deve ser gerada. Sendo assim a partir da função shape() da biblioteca numpy é possível pegar o tamanho da imagem e para criar as 4 imagens basta dividir a altura da imagem original por 2 e a largura por 2. Por exemplo caso a imagem original tenha um tamanho de 256x256 a img1 gerada será formada por pixels que vão da posição 0 da original até sua altura/2 e sua largura dividido/2, ou seja, img1 será de 128x128</p> 

					<pre>
					    <code>
	import cv2 as cv
	import numpy as np

	img = cv.imread("../Fotos/biel.png")
	sizeImg = np.shape(img)
	height = sizeImg[0]
	width = sizeImg[1]

	#Criando 4 imagens a partir da original
	img1 = img[0:height//2, 0:width//2]
	img2 = img[0:height//2, width//2:width]
	img3 = img[height//2:height, 0:width//2]
	img4 = img[height//2:height,width//2:width]
	print(img1.shape)

	#criando uma imagem nova a partir da função zeros com mesma altura e largura da original
	newImg = np.zeros((height,width,3), np.uint8)

	#alocando as imagens criadas em uma nova imagem
	newImg[0:height//2, 0:width//2] = img4
	newImg[0:height//2, width//2:width] = img3
	newImg[height//2:height, 0:width//2] = img2
	newImg[height//2:height,width//2:width] = img1

	#mostrando e salvando as imagens
	cv.imshow("Antes",img)
	cv.imwrite("../Fotos/Antes.jpg", img)
	cv.imshow("Depois",newImg)
	cv.imwrite("../Fotos/Depois.jpg", newImg)
	cv.waitKey(0)
	cv.destroyAllWindows()


					    </code>
				    </pre>

				    <h5>Resultado:</h5>
						 <div class="ladoalado"><img src="assets/images/Antes.jpg"><img src="assets/images/Depois.jpg"></div> 

					

				    <h2 id="t2" class="posImg">Preenchendo Regiões</h2>
					<h4>Exercicio 1</h4>
					<p style="color:#6C51A4;"><i>Observando-se o programa labeling.cpp como exemplo, é possível verificar que caso existam mais de 255 objetos na cena, o processo de rotulação poderá ficar comprometido. Identifique a situação em que isso ocorre e proponha uma solução para este problema.</i> </p>

		    
					<p>Isso irá ocorrer quando houver mais de 255 objetos em cena pois cada objeto encontrado é rotulado com um tom de cinza que varia de 0 a 255, logo quando houverem mais de 255 objetos não será possível rotula-los pois não haverá mais tons de cinza disponiveis, uma solução possível seria adaptar o código para um sistema RGB pois dessa forma seria possível rotular até 256<sup>3</sup> objetos</p> 

				    <div class="meta mb-3"></div>

				    <h4>Exercicio 2</h4>
					<p style="color:#6C51A4;"><i>Aprimore o algoritmo de contagem apresentado para identificar regiões com ou sem buracos internos que existam na cena. Assuma que objetos com mais de um buraco podem existir. Inclua suporte no seu algoritmo para não contar bolhas que tocam as bordas da imagem. Não se pode presumir, a priori, que elas tenham buracos ou não.</i> </p>

		    
					<p>Esse exercicio tem como foco aplicar o uso do <i>floodfill</i>, um algoritmo que descobre os aglomerados de pixels semelhantes em uma imagem. Para aprimorar o código de forma que seja possível contar quantos objetos possuem buracos ou não e remover os que tocam na borda é necessário percorrer a imagem de forma que, se estiver na borda e houver um pixel de valor 255 um floodfill com tom 0 deverá ser implementado de modo que todos os pixels vizinhos a ele e que sejam de tom 255 na borda passem a ter o tom 0. </p> 

					<p>Após removido os elementos da borda é necessário percorrer a imagem novamente e, quando encontrado um pixel de valor 255, uma variável denominada numObjects é incrementada e um floodfill é aplicado de modo a rotular aquele objeto com um tom de cinza, ou seja, ao encontrar o objeto de número 1 aquele objeto será rotulado com um tom de cinza 1 e assim sucessivamente para todos os objetos encontrados. Por fim contado todos os objetos da imagem agora é necessário saber quais possuem buracos ou não, dessa maneira com a imagem sem objetos na borda um floodfill na posição (0,0) deve ser aplicado de forma que na vizinhança do pixel 0,0 que possui o tom 0 passará a ter o tom 255 mudando o fundo da imagem. Feito isso ao percorrer essa imagem se o pixel possuir valor 0 uma variavel denominada numHoles é incrementada e um floodfill é aplicado. </p>


					<pre>
					    <code>
import cv2 as cv
import numpy as np


# Removendo objetos da borda e contando logo após
def removeAndCount(img):
    sizeImg = np.shape(img)
    numObjects = 0
    for i in range(0, sizeImg[0]):
        for j in range(0, sizeImg[1]):
            if i == 0 or i == sizeImg[0] - 1 or j == 0 or j == sizeImg[1] - 1:
                if img[i][j] == 255:
                    cv.floodFill(img, None, (j, i), 0)
    cv.imshow("noEdge", img)
    cv.imwrite("../Fotos/noEdge.jpg", img)

    for i in range(0, sizeImg[0]):
        for j in range(0, sizeImg[1]):
            if img[i][j] == 255:
                numObjects += 1
                cv.floodFill(img, None, (j, i), numObjects)
    print("Quantidade de bolhas no total: {}".format(numObjects))
    cv.imshow("comTons", img)
    cv.imwrite("../Fotos/Tons.jpg", img)
    return img, numObjects


# Contando quantos obejtos possuem buracos
def holes(img):
    sizeImg = np.shape(img)
    numHoles = 0
    for i in range(0, sizeImg[0]):
        for j in range(0, sizeImg[1]):
            if img[i][j] == 0:
                numHoles += 1
                cv.floodFill(img, None, (j, i), 255)
    print("Quantidade de bolhas com buracos : {}".format(numHoles))
    print("Quantidade de bolhas sem buracos : {}".format(numberObjects - numHoles))


img = cv.imread("../Fotos/bolhas.png", cv.IMREAD_GRAYSCALE)
copy_img = img.copy()

editedImgData = removeAndCount(copy_img)
imgEditada = editedImgData[0]
numberObjects = editedImgData[1]

cv.imshow("antesdoflood", imgEditada)
cv.floodFill(imgEditada, None, (0, 0), 255)
cv.imshow("imgedita", imgEditada)

holes(imgEditada)
cv.imshow("Before", img)
cv.imwrite("../Fotos/Before.jpg", img)
cv.imshow("After", imgEditada)
cv.imwrite("../Fotos/After.jpg", img)
cv.waitKey(0)
cv.destroyAllWindows()

					    </code>
				    </pre>

				    <h5>Resultado:</h5>
						 <div class="ladoalado" ><!--style="margin-bottom: 30px;">-->
						 	<img src="assets/images/finallabble.png">
						    
						 </div> 

						 <div class="ladoalado">
						 	 <div class="ladoalado"><img src="assets/images/lab2.png"></div>
						    
						 </div> 

						 


				    <h2 id="t3" class="posImg">Manipulação de Histogramas</h2>
 					<div class="meta mb-3"></div>
					<h4>Exercicio 1</h4>
					<p style="color:#6C51A4;"><i>Utilizando o programa exemplos/histogram.cpp como referência, implemente um programa equalize.cpp. Este deverá, para cada imagem capturada, realizar a equalização do histogram antes de exibir a imagem. Teste sua implementação apontando a câmera para ambientes com iluminações variadas e observando o efeito gerado. Assuma que as imagens processadas serão em tons de cinza.</i> </p>


					<p>Um histograma tem como objetivo representar de maneira gráfica a distribuição de intensidades de uma imagens, ou seja, quantificar o número de pixels para cada valor de tom.Quando uma imagem é equalizada o seu contraste é melhorado. Para esse exercicio é necessário fazer a leitura dos frames da câmera por meio da função do cap.read(), após isso colocar a imagem em escala de cinza e fazer o cálculo do histograma através da função do opencv calcHist() e também calcular o histograma equalizado com equalizeHist(), feito isso plotar o gráfico dos histogramas e mostrar o vídeo sendo equalizado em tempo real. Abaixo no resultado a cor vermelha representa o gráfico do histograma e na cor azul o gráfico do histograma equalizado. </p>


					<pre>
					    <code>
import cv2 as cv
import numpy as np
import matplotlib.pyplot as plt


cap = cv.VideoCapture(0)

if not cap.isOpened():
    print("Cannot open camera")
    exit()
while True:
    # Capture frame-by-frame
    ret, frame = cap.read()
    # if frame is read correctly ret is True
    if not ret:
        print("Can't receive frame (stream end?). Exiting ...")
        break

    # Our operations on the frame come here
    imgGray = cv.cvtColor(frame, cv.COLOR_BGR2GRAY)
    histNormal = cv.calcHist([imgGray], [0], None, [256], [0, 256])
    imgEqualized = cv.equalizeHist(imgGray)
    histEqualized = cv.calcHist([imgEqualized],[0],None,[256],[0,256])
    both = np.hstack((imgGray,imgEqualized))

    plt.plot(histNormal, 'r')
    plt.plot(histEqualized, 'b')
    plt.xlim([0, 256])
    plt.show()

    # Display the resulting before and after
    cv.imshow('Left: Normal Image  Right: Equalized Image', both)

    if cv.waitKey(1) == ord('q'):
        break
# When everything done, release the capture
cap.release()
cv.destroyAllWindows()
					    </code>
				    </pre>

				    <h5>Resultado:</h5>
							<div class="imgWithCaption" style="margin-bottom:30px">
						 	<img src="assets/images/Janela Fechada1.png">
						 	<span>Imagem com a Persiana Fechada</span>
						    
						 </div> 

						 <div class="imgWithCaption">
						 	 <div class="ladoalado"><img src="assets/images/myplotJanelaFechada.png"></div>
						     <span>Histograma e Equalização com Persiana Fechada </span>
						 </div> 

						 <div class="imgWithCaption">
						 	 <div class="ladoalado"><img src="assets/images/Janela Aberta1.png"></div>
						     <span>Imagem com a Persiana Aberta</span>
						 </div> 

						 <div class="imgWithCaption">
						 	 <div class="ladoalado"><img src="assets/images/myplotJA.png"></div>
						     <span>Histograma e Equalização com Persiana Aberta</span>
						 </div> 

				    <!--<div class="ladoalado"><img src="assets/images/finallabble.png"></div>-->
					 	


					 <h4>Exercicio 2</h4>
					<p style="color:#6C51A4;"><i>Utilizando o programa exemplos/histogram.cpp como referência, implemente um programa motiondetector.cpp. Este deverá continuamente calcular o histograma da imagem (apenas uma componente de cor é suficiente) e compará-lo com o último histograma calculado. Quando a diferença entre estes ultrapassar um limiar pré-estabelecido, ative um alarme. Utilize uma função de comparação que julgar conveniente.</i> </p>

		    
					<p>Para este exercicio a solução utilizada é aplicar uma diferença entre os histograma do vídeo verificando o frame anterior e o atual, se essa diferença for um valor maior ou igual a 50(podendo mudar para uma maior sensiblidade) um contador de diferenças é aplicado se houverem X diferenças maior ou igual a esse valor de sensibilidade é considerado que houve um movimento no vídeo.  </p> 

					<pre>
					    <code>
import cv2 as cv
import numpy as np


cap = cv.VideoCapture(0)
ret, frame = cap.read()
imgGray = cv.cvtColor(frame, cv.COLOR_BGR2GRAY)
imgHist_previous = cv.calcHist([imgGray],[0],None,[256],[0,256])


if not cap.isOpened():
    print("Cannot open camera")
    exit()
while True:
    # Capture frame-by-frame
    ret, frame = cap.read()
    # if frame is read correctly ret is True
    if not ret:
        print("Can't receive frame (stream end?). Exiting ...")
        break

    # Our operations on the frame come here
    imgGray = cv.cvtColor(frame, cv.COLOR_BGR2GRAY)
    imgHist_actual = cv.calcHist([imgGray],[0],None,[256],[0,256])
    sizeImgHis = np.shape(imgHist_actual)
    counterDif = 0
    for i in range(0,sizeImgHis[0]):
        difBetw = imgHist_previous[i] - imgHist_actual[i]
        if difBetw >= 50:
            counterDif += 1
    if counterDif >= 80:
        print("Movimento Detectado ")
    imgHist_previous = imgHist_actual.copy()

    cv.imshow('Actual', imgGray)

    if cv.waitKey(1) == ord('q'):
        break

# When everything done, release the capture
cap.release()
cv.destroyAllWindows()
					    </code>
				    </pre>	

				    <h5>Resultado:</h5>
				    <!--<div class="ladoalado"><img src="assets/images/finallabble.png"></div>-->

				    <div class="embed-responsive embed-responsive-16by9">
					   <iframe width="560" height="315" src="assets/Videos/movimento.mp4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>					
					</div>


				    <h2 id="t4" class="posImg">Filtragem no Domínio Espacial I</h2>
					<h4>Exercicio 1</h4>
					<p style="color:#6C51A4;"><i>Utilizando o programa exemplos/filtroespacial.cpp como referência, implemente um programa laplgauss.cpp. O programa deverá acrescentar mais uma funcionalidade ao exemplo fornecido, permitindo que seja calculado o laplaciano do gaussiano das imagens capturadas. Compare o resultado desse filtro com a simples aplicação do filtro laplaciano.</i> </p>

		    
					<p>Esse exercicio tem como objetivo a aplicação de filtros em tempo real adicionando a funcionalidade do filtro de gauss+Laplaciano de modo a verificar que aplicando ambos os filtros em relação apenas ao Laplaciano o ruído é atenuado e com isso as bordas ficam mais acentudas e mais faceis de serem identificadas.Nessa atividade a função que foi utilizada para as operações com filtro se chama filter2D da própria biblioteca do Opencv. </p> 

					<p>Na função criada denominada <i>applyFilter</i> a imagem é transformada em escala de cinza e o filtro é aplicado a partir da máscara escolhida pelo teclado passando-o como parâmetro e também é verificado se o absoluto é escolhido.</p>

										<pre>
					    <code>
import cv2 as cv
import numpy as np

media = np.array([[0.1111, 0.1111, 0.1111], [0.1111, 0.1111,0.1111], [0.1111, 0.1111, 0.1111]], dtype=np.float32 )
gauss = np.array([[0.0625, 0.125,  0.0625], [0.125, 0.25,0.125],  [0.0625, 0.125,  0.0625]], dtype=np.float32)
horizontal = np.array([[-1, 0, 1], [-2, 0, 2], [-1, 0, 1]], dtype=np.float32)
vertical = np.array([[-1, -2, -1], [0, 0, 0], [1, 2, 1]], dtype=np.float32)
laplacian = np.array([[0, -1, 0], [-1, 4, -1], [0, -1, 0]], dtype=np.float32)
boost = np.array([[0, -1, 0], [-1, 5.2, -1], [0, -1, 0]], dtype=np.float32)

def applyFilter(masks, grayedImage, absolute):
  cv.imshow("Original", grayedImage)
  print(absolute)
  grayedImageF32 = np.array(grayedImage, dtype=np.float32)
  result = np.array(grayedImageF32, dtype=np.uint8)

  if (len(masks) == 1):
    frameFiltered = cv.filter2D(grayedImageF32, -1, masks[0])
    if absolute: 
      frameFiltered = abs(frameFiltered)

    result = np.array(frameFiltered, dtype=np.uint8)
  else:
    currentFiltered = cv.filter2D(grayedImageF32, -1, masks[0])
    for mask in masks[1:]:
      frameFiltered = cv.filter2D(currentFiltered, -1, mask)
      if absolute: 
        frameFiltered = abs(frameFiltered)

    result = np.array(frameFiltered, dtype=np.uint8)

  cv.imshow("Filtered", result) 



cap = cv.VideoCapture(0)
mask = [media];
absolute = True

print("\Press the key correspondent to the filter: \n"
        "a - absoluto\n"
        "m - media\n"
        "g - gauss\n"
        "v - vertical\n"
        "h - horizontal\n"
        "l - laplaciano\n"
        "p - gaussiano com laplacian\n"
        "esc - sair\n")

if not cap.isOpened():
  print("Cannot open camera")
  exit()

while True:
      # Capture frame-by-frame
  ret, frame = cap.read()
  # if frame is read correctly ret is True
  if not ret:
    print("Can't receive frame (stream end?). Exiting ...")
    break

  grayedImage = cv.cvtColor(frame, cv.COLOR_BGR2GRAY)

  key = cv.waitKey(1)
  if key == ord('m'):
    mask = [media]

  elif key == ord('a'):
    absolute = not absolute

  elif key == ord('g'):
    mask = [gauss]

  elif key == ord('h'):
    mask = [horizontal]

  elif key == ord('v'):
    mask = [vertical]

  elif key == ord('l'):
    mask = [laplacian]

  elif key == ord('b'):
    mask = [boost]

  elif key == ord('p'):
    mask = [gauss, laplacian]

  elif key == 27: #esc
    break

  applyFilter(mask, grayedImage, absolute)


  

					    </code>
				    </pre>	

				    
				    <h5>Resultado:</h5>
				    <!--<div class="ladoalado"><img src="assets/images/finallabble.png"></div>-->
				    <div class="imgWithCaption" style="margin-bottom:30px">
						 	<img src="assets/images/Original.png">
						 	<span>Original</span>
						    
						 </div> 


						  <div class="imgWithCaption">
						 	 <div class="ladoalado"><img src="assets/images/GaussLaplace.png"></div>
						     <span>Filtro de Gauss + Laplace</span>
						  </div>

						   <div class="imgWithCaption">
						 	 <div class="ladoalado"><img src="assets/images/GaussLaplaceAbsolut.png"></div>
						     <span>Filtro de Gauss + Laplace com Absoluto</span>
						  </div>

						 <div class="imgWithCaption">
						 	 <div class="ladoalado"><img src="assets/images/Media.png"></div>
						     <span>Filtro Média</span>
						 </div>

						
						 <div class="imgWithCaption">
						 	 <div class="ladoalado"><img src="assets/images/Laplacian.png"></div>
						     <span>Filtro Laplaciano</span>
						 </div>

						 <div class="imgWithCaption">
						 	 <div class="ladoalado"><img src="assets/images/LaplacianAbsolut.png"></div>
						     <span>Filtro Laplaciano com Absoluto</span>
						 </div> 

						 <div class="imgWithCaption">
						 	 <div class="ladoalado"><img src="assets/images/Horizontal.png"></div>
						     <span>Filtro Horizontal</span>
						 </div>

						 <div class="imgWithCaption">
						 	 <div class="ladoalado"><img src="assets/images/HorizontalAbsolut.png"></div>
						     <span>Filtro Horizontal com Absoluto</span>
						 </div>

						 <div class="imgWithCaption">
						 	 <div class="ladoalado"><img src="assets/images/Vertical.png"></div>
						     <span>Filtro Vertical</span>
						 </div>

						 <div class="imgWithCaption">
						 	 <div class="ladoalado"><img src="assets/images/VerticalAbsolut.png"></div>
						     <span>Filtro Vertical com Absoluto</span>
						 </div>

						 <div class="imgWithCaption">
						 	 <div class="ladoalado"><img src="assets/images/Boost.png"></div>
						     <span>Filtro Boost</span>
						 </div>

						 <div class="imgWithCaption">
						 	 <div class="ladoalado"><img src="assets/images/BoostAbsolut.png"></div>
						     <span>Filtro Boost com Absoluto</span>
						 </div>



				    <!--<h3 class="mt-5 mb-3">Code Block Example</h3>
				    <p>You can get more info at <a href="https://highlightjs.org/" target="_blank">https://highlightjs.org/</a>. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. </p>
				    <pre>
					    <code>
function $initHighlight(block, cls) {
  try {
    if (cls.search(/\bno\-highlight\b/) != -1)
      return process(block, true, 0x0F) +
             ` class="${cls}"`;
  } catch (e) {
    /* handle exception */
  }
  for (var i = 0 / 2; i < classes.length; i++) {
    if (checkCondition(classes[i]) === undefined)
      console.log('undefined');
  }
}

export  $initHighlight;
					    </code>
				    </pre>
				    <h3 class="mt-5 mb-3">Typography</h3>
				    <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.</p>
				    <h5 class="my-3">Bullet Points:</h5>
				    <ul class="mb-5">
					  <li class="mb-2">Lorem ipsum dolor sit amet consectetuer.</li>
					  <li class="mb-2">Aenean commodo ligula eget dolor.</li>
					  <li class="mb-2">Aenean massa cum sociis natoque penatibus.</li>
					</ul>
					<ol class="mb-5">
					  <li class="mb-2">Lorem ipsum dolor sit amet consectetuer.</li>
					  <li class="mb-2">Aenean commodo ligula eget dolor.</li>
					  <li class="mb-2">Aenean massa cum sociis natoque penatibus.</li>
					</ol>
					<h5 class="my-3">Quote Example:</h5>
					<blockquote class="blockquote m-lg-5 py-3 pl-4 px-lg-5">
						<p class="mb-2">You might not think that programmers are artists, but programming is an extremely creative profession. It's logic-based creativity.</p>
						<footer class="blockquote-footer">John Romero</footer>
					</blockquote>
					
					<h5 class="my-3">Table Example:</h5>
					<table class="table table-striped my-5">
						<thead>
							<tr>
								<th scope="col">#</th>
								<th scope="col">First</th>
								<th scope="col">Last</th>
								<th scope="col">Handle</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<th scope="row">1</th>
								<td>Mark</td>
								<td>Otto</td>
								<td>@mdo</td>
							</tr>
							<tr>
								<th scope="row">2</th>
								<td>Jacob</td>
								<td>Thornton</td>
								<td>@fat</td>
							</tr>
							<tr>
								<th scope="row">3</th>
								<td>Larry</td>
								<td>the Bird</td>
								<td>@twitter</td>
							</tr>
						</tbody>
					</table>
					
					<h5 class="mb-3">Embed A Tweet:</h5>
					
					<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">1969:<br>-what&#39;re you doing with that 2KB of RAM?<br>-sending people to the moon<br><br>2017:<br>-what&#39;re you doing with that 1.5GB of RAM?<br>-running Slack</p>&mdash; I Am Devloper (@iamdevloper) <a href="https://twitter.com/iamdevloper/status/926458505355235328?ref_src=twsrc%5Etfw">November 3, 2017</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>


				    
				    <h3 class="mt-5 mb-3">Video Example</h3>
				    <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. </p>

				    <div class="embed-responsive embed-responsive-16by9">
					   <iframe width="560" height="315" src="https://www.youtube.com/embed/hnCmSXCZEpU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>					
					</div>-->
				   
			    </div>
				    
			    <!--<nav class="blog-nav nav nav-justified my-5">
				  <a class="nav-link-prev nav-item nav-link rounded-left" href="index.html">Previous<i class="arrow-prev fas fa-long-arrow-alt-left"></i></a> 
				  <a class="nav-link-next nav-item nav-link rounded-right" href="blog-list.html">Next<i class="arrow-next fas fa-long-arrow-alt-right"></i></a>
				</nav> 
				
				<div class="blog-comments-section">
					<div id="disqus_thread"></div>
					<script>
					    /**
					     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT 
					     *  THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR 
					     *  PLATFORM OR CMS.
					     *  
					     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: 
					     *  https://disqus.com/admin/universalcode/#configuration-variables
					     */
					    /*
					    var disqus_config = function () {
					        // Replace PAGE_URL with your page's canonical URL variable
					        this.page.url = PAGE_URL;  
					        
					        // Replace PAGE_IDENTIFIER with your page's unique identifier variable
					        this.page.identifier = PAGE_IDENTIFIER; 
					    };
					    */
					    
					    (function() {  // REQUIRED CONFIGURATION VARIABLE: EDIT THE SHORTNAME BELOW
					        var d = document, s = d.createElement('script');
					        
					        // IMPORTANT: Replace 3wmthemes with your forum shortname!
					        s.src = 'https://3wmthemes.disqus.com/embed.js';
					        
					        s.setAttribute('data-timestamp', +new Date());
					        (d.head || d.body).appendChild(s);
					    })();
					</script>
					<noscript>
					    Please enable JavaScript to view the 
					    <a href="https://disqus.com/?ref_noscript" rel="nofollow">
					        comments powered by Disqus.
					    </a>
					</noscript>
				</div><!--//blog-comments-section-->
				
		    </div><!--//container-->
	    </article>
	    
	    <!--<section class="promo-section theme-bg-light py-5 text-center">
		    <div class="container">
			    <h2 class="title">Promo Section Heading</h2>
			    <p>You can use this section to promote your side projects etc. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. </p>
                <figure class="promo-figure">
			        <a href="https://made4dev.com" target="_blank"><img class="img-fluid" src="assets/images/promo-banner.jpg" alt="image"></a>
			    </figure>
		    </div><!--//container-->
	    </section><!--//promo-section--> 
	    
	    <footer class="footer text-center py-2 theme-bg-dark">
		   
	        <!--/* This template is released under the Creative Commons Attribution 3.0 License. Please keep the attribution link below when using for your own project. Thank you for your support. :) If you'd like to use the template without the attribution, you can buy the commercial license via our website: themes.3rdwavemedia.com */-->
                <small class="copyright">Designed with <i class="fas fa-heart" style="color: #fb866a;"></i> by <a href="http://themes.3rdwavemedia.com" target="_blank">Xiaoying Riley</a> for developers and modified by Sâmela Bruna</small>
		   
	    </footer>
    
    </div><!--//main-wrapper--> 
    

    <!-- *****CONFIGURE STYLE (REMOVE ON YOUR PRODUCTION SITE)****** -->  
    <!--<div id="config-panel" class="config-panel d-none d-lg-block">
        <div class="panel-inner">
            <a id="config-trigger" class="config-trigger config-panel-hide text-center" href="#"><i class="fas fa-cog fa-spin mx-auto" data-fa-transform="down-6" ></i></a>
            <h5 class="panel-title">Choose Colour</h5>
            <ul id="color-options" class="list-inline mb-0">
                <li class="theme-1 active list-inline-item"><a data-style="assets/css/theme-1.css" href="#"></a></li>
                <li class="theme-2  list-inline-item"><a data-style="assets/css/theme-2.css" href="#"></a></li>
                <li class="theme-3  list-inline-item"><a data-style="assets/css/theme-3.css" href="#"></a></li>
                <li class="theme-4  list-inline-item"><a data-style="assets/css/theme-4.css" href="#"></a></li>
                <li class="theme-5  list-inline-item"><a data-style="assets/css/theme-5.css" href="#"></a></li>
                <li class="theme-6  list-inline-item"><a data-style="assets/css/theme-6.css" href="#"></a></li>
                <li class="theme-7  list-inline-item"><a data-style="assets/css/theme-7.css" href="#"></a></li>
                <li class="theme-8  list-inline-item"><a data-style="assets/css/theme-8.css" href="#"></a></li>
            </ul>
            <a id="config-close" class="close" href="#"><i class="fa fa-times-circle"></i></a>
        </div><!--//panel-inner-->
    </div><!--//configure-panel-->


    
       
    <!-- Javascript -->          
    <script src="assets/plugins/jquery-3.3.1.min.js"></script>
    <script src="assets/plugins/popper.min.js"></script> 
    <script src="assets/plugins/bootstrap/js/bootstrap.min.js"></script> 
    
    <!-- Page Specific JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/highlight.min.js"></script>

    <!-- Custom JS -->
    <script src="assets/js/blog.js"></script>
    
    <!-- Style Switcher (REMOVE ON YOUR PRODUCTION SITE) -->
    <script src="assets/js/demo/style-switcher.js"></script>     
    

</body>
</html> 

